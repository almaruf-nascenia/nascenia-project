<% headers = ['Developer Name', 'Experience in Nascenia(years)', 'Previous Experience(years)', 'Total Experience(years)', 'Project Count', 'Assigned Projects'] %>
<%= CSV.generate_line(headers).html_safe.strip %>
<% @developers.each do |developer| %>
    <% active_projects = developer.active_project_teams %>
            <% row = [
                    developer.name,
                    developer.company_tenure,
                    developer.previous_job_exp,
                    developer.total_experience,
                    active_projects.count,
                    active_projects.present? ? active_projects.map{ |project_team| "#{project_team.project.name} (#{project_team.participation_percentage}%)" }.join(' + ') : nil
            ] %>
        <%= CSV.generate_line(row).html_safe.strip %>
<% end %>
